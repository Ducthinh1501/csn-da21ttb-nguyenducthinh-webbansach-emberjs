<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MyProject2</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

      

    <link integrity="" rel="stylesheet" href="{{rootURL}}assets/vendor.css">
    <link integrity="" rel="stylesheet" href="{{rootURL}}assets/my-project-2.css">
    <link rel="stylesheet" type="text/css" href="base.css">  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="assets\js\vendor\modernizr-2.8.3.min.js"></script>
    {{content-for "head-footer"}}
  </head>
  <body>
    <body>

        
      <!-- header -->
      <header>
          <nav>
              <div class="img-nav">
                  <img src="#" alt="" />
              </div>
              <div class="content-nav">
                  <ul>
                      <li><a href="#">Trang Chủ</a></li>
                      <li><a href="#">Sản Phẩm</a></li>
                      <li><a href="#">Liên Hệ</a></li>
                      <li><a href="#">Giới Thiệu</a></li>
                  </ul>
                  <div>
                      <input id="input-search"  type="text" name="search" placeholder="Tìm kiếm sản phẩm..." onkeypress="handleSearchProduct(event)"/>
                      <button type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
                  </div>
                  
              </div>
              <!-- The Modal -->
              <button id="cart">
                  <i class="fa fa-shopping-basket" aria-hidden="true"></i>
                  Giỏ Hàng
              </button>
              <div id="myModal" class="modal">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title">Giỏ Hàng</h5>
                          <span class="close">&times;</span>
                      </div>
                      <div class="modal-body">
                          <div class="cart-row">
                              <span class="cart-item cart-header cart-column">Sản Phẩm</span>
                              <span class="cart-price cart-header cart-column">Giá</span>
                              <span class="cart-quantity cart-header cart-column">Số Lượng</span>
                          </div>
                          <div id="container-product-cart"> 
                              
                          </div>
                          <div class="cart-total">
                              <strong class="cart-total-title">Tổng Cộng:</strong>
                              <span class="cart-total-price">0VNĐ</span>
                          </div>
                      </div>
  
                      <div class="modal-footer">
                          <button type="button" class="btn btn-secondary close-footer">Đóng</button>
                          <button type="button" class="btn btn-primary order">Thanh Toán</button>
                      </div>
                  </div>
              </div>

                <button class="btnlogin-popup">Dang ky</button>


                

              
          </nav>

          <!-- content -->
    <section class="wrapper">
      <div class="products" id="container-products">
           
      </div>
  </section>
    

  <!-- footer -->
  <footer>
    <div class="footer-item">
        <div class="img-footer">
            <img src= "/ember-project/public/assets/imgs/gian.jpg" alt="" />
        </div>
        <div class="social-footer">
            <li><a target="_blank" href="https://www.facebook.com/profile.php?id=100055023455955">
                    <i class="fa fa-facebook-square" aria-hidden="true"></i>
                </a></li>
            <li><a target="_blank" href="https://github.com/Ducthinh1501/csn-da21ttb-nguyenducthinh-webbansach-emberjs/settings/access">
                    <i class="fa fa-github-square" aria-hidden="true"></i>
                </a></li>

        </div>
    </div>
</footer>
  
      </header>

    <script src="{{rootURL}}assets/vendor.js">
    </script>
    <script src="{{rootURL}}assets/my-project-2.js"></script>

    <script>


        let products = [
            {
                id: 1,
                name: '3 Người thầy vĩ đại',
                price: 30000,
                thumbail_url: '/assets/imgs/3nguoithanhvidai.jpg'
            },
            {
                id: 2,
                name: 'Biết người dùng người quản người',
                price: 76000,
                thumbail_url: '/assets/imgs/bietnguoidungnguoiquannguoi.jpg'
            },
            {
                id: 3,
                name: 'Bí mật tư duy triệu phú',
                price: 76000,
                thumbail_url: '/assets/imgs/bimattuyduytrieuphu.jpg'
            },
            {
                id: 4,
                name: 'Bước chậm giữa thế gian vội vả',
                price: 36700,
                thumbail_url: '/assets/imgs/buocchamlagiuathegianvoiva.jpg'
            },
            {
                id: 5,
                name: 'Cảm xúc là kẻ thù số một của của thành công',
                price: 76000,
                thumbail_url: '/assets/imgs/camxuclakethusomotcuathanhcong.jpg'
            },
            {
                id: 6,
                name: 'Cây cam ngọt của tôi',
                price: 76000,
                thumbail_url: '/assets/imgs/caycamngotcuatoi.jpg'
            },
            {
                id: 7,
                name: 'Cư xử như đàn bà suy nghĩ như đàn ông',
                price: 76000,
                thumbail_url: '/assets/imgs/cuxunhudanbasuynghinhudanong.jpg'
            },
            {
                id: 8,
                name: 'Đắc nhân tâm',
                price: 76000,
                thumbail_url: '/assets/imgs/dacnhantam.jpg'
            },
            {
                id: 9,
                name: 'Điềm tĩnh và nóng giận',
                price: 76000,
                thumbail_url: '/assets/imgs/diemtinhvanonggian.jpg'
            },
            {
                id: 10,
                name: 'Đời ngắn đừng ngủ dài',
                price: 76000,
                thumbail_url: '/assets/imgs/doingandungngudai.jpg'
            },
            {
                id: 11,
                name: 'Khéo ăn nói sẽ có được thiên hạ',
                price: 76000,
                thumbail_url: '/assets/imgs/kheoannoisecoduocthienha.jpg'
            },
            {
                id: 12,
                name: 'Giận',
                price: 76000,
                thumbail_url: '/assets/imgs/gian.jpg'
            },
            {
                id: 13,
                name: 'Không bao giờ là thất bại',
                price: 76000,
                thumbail_url: '/assets/imgs/khongbaogiolathatbai.jpg'
            },
            {
                id: 14,
                name: 'Kỷ luật tự giác',
                price: 76000,
                thumbail_url: '/assets/imgs/kyluattugiac.jpg'
            },
            {
                id: 15,
                name: 'Làm chủ tư duy thay đổi vận mệnh',
                price: 76000,
                thumbail_url: '/assets/imgs/lamchutuyduythaydoivanmenh.jpg'
            },
            {
                id: 16,
                name: 'Mình sinh ra đâu phải để buồn',
                price: 76000,
                thumbail_url: '/assets/imgs/minhsinhradauphaidebuon.jpg'
            },
            {
                id: 17,
                name: 'Muôn kiếp nhân sinh',
                price: 76000,
                thumbail_url: '/assets/imgs/muonkiepnhansinh.jpg'
            },
            {
                id: 18,
                name: 'Nghĩ giàu làm giàu',
                price: 76000,
                thumbail_url: '/assets/imgs/nghigiaulamgiau.jpg'
            },
            {
                id: 19,
                name: 'Nghĩ lớn để thành công',
                price: 76000,
                thumbail_url: '/assets/imgs/nghilondethanhcong.jpg'
            },
            {
                id: 20,
                name: 'Người giàu có nhất thành Babylon',
                price: 76000,
                thumbail_url: '/assets/imgs/nguoigiauconhatthanhbabylon.jpg'
            },
            {
                id: 21,
                name: 'Nhà đầu tư thông minh',
                price: 76000,
                thumbail_url: '/assets/imgs/nhadaututhongminh.jpg'
            },
            {
                id: 22,
                name: 'Nhà giả Kim',
                price: 76000,
                thumbail_url: '/assets/imgs/nhagiakim.jpg'
            },
            {
                id: 23,
                name: 'Nhà Lãnh đạo không chức danh',
                price: 76000,
                thumbail_url: '/assets/imgs/nhalanhdaokhongchucdanh.jpg'
            },
            {
                id: 24,
                name: 'Những đòn tâm lý trong thuyết phục',
                price: 76000,
                thumbail_url: '/assets/imgs/nhungdontamlytrongthuyetphuc.jpg'
            },
            
            {
                id: 26,
                name: 'Tại sao đàn ông thích tình dục',
                price: 76000,
                thumbail_url: '/assets/imgs/taisaodanongthichtinhduc.jpg'
            },
            {
                id: 27,
                name: 'Thiên tài bên trái kẻ điên bên phải',
                price: 76000,
                thumbail_url: '/assets/imgs/thientaibentraikedienbenphai.jpg'
            },
            {
                id: 28,
                name: 'Thôi miên bằng ngôn từ',
                price: 76000,
                thumbail_url: '/assets/imgs/thoimienbangngontu.jpg'
            },
            {
                id: 29,
                name: 'Thôi miên bằng ngôn từ',
                price: 76000,
                thumbail_url: '/assets/imgs/thoimienbangngontu.jpg'
            },{
                id: 30,
                name: 'Thuật đọc tâm',
                price: 76000,
                thumbail_url: '/assets/imgs/thuatdoctam.jpg'
            },{
                id: 31,
                name: 'Tôi tư duy tôi thành đạt',
                price: 76000,
                thumbail_url: '/assets/imgs/toituduytoithanhdat.jpg'
            },{
                id: 32,
                name: 'Tức giận là bản năng tĩnh lặng là bản lĩnh',
                price: 76000,
                thumbail_url: '/assets/imgs/tucgianlabannangtinhlanglabanlinh.jpg'
            },
            {
                id: 33,
                name: 'Tư duy nhanh và chậm',
                price: 76000,
                thumbail_url: '/assets/imgs/tuduynhanhvacham.jpg'
            },
        ];




        handleRenderProductIntoPage();


        function handleRenderProductIntoPage() {
            let containerProduct = document.querySelector('#container-products');

            let productHTML = products.map(item => {
                return `
                    <li class="main-product">
                        <div class="img-product test">
                            <img class="img-prd"
                                src="${item.thumbail_url}"
                                alt="">
                        </div>
                        <div class="content-product">
                            <h3 class="content-product-h3">${item.name}</h3>
                            <div class="content-product-deltals">
                                <div class="price">
                                    <span class="money">${item.price}đ</span>
                                </div>
                                <button type="button" class="btn btn-cart"  onClick="handleAddCart(${item.id})">Thêm Vào Giỏ</button>
                            </div>
                        </div>
                    </li>
                `;
            })

            containerProduct.innerHTML = `<ul>${productHTML.join('')}</ul>`;
        }

        
        function handleAddCart(id_product_add_cart) { 
            let productInCart = JSON.parse(localStorage.getItem('cart')) ? JSON.parse(localStorage.getItem('cart')) : [];

            for (let i=0; i<products.length; i++) {
                if (products[i].id == id_product_add_cart) { 
                    let is_valid = true;
                    for (let j=0; j<productInCart.length; j++) {
                        if (id_product_add_cart == productInCart[j].id) {
                            is_valid = false;
                            break;
                        }
                    } 

                    if (is_valid)
                        productInCart.push(products[i]);
                }
                    
            }

            localStorage.setItem('cart', JSON.stringify(productInCart))
        }


       

        function handleSearchProduct(event) {
            let product_filler_search = [];
            if (event.key == 'Enter') {
                let key_word = document.querySelector("#input-search").value.trim();

                product_filler_search = products.filter(item => item.name.toLocaleLowerCase().indexOf(key_word.toLocaleLowerCase()) !== -1)

                let productHTML = product_filler_search.map(item => {
                    return `
                        <li class="main-product">
                            <div class="img-product test">
                                <img class="img-prd"
                                    src="${item.thumbail_url}"
                                    alt="">
                            </div>
                            <div class="content-product">
                                <h3 class="content-product-h3">${item.name}</h3>
                                <div class="content-product-deltals">
                                    <div class="price">
                                        <span class="money">${item.price}đ</span>
                                    </div>
                                    <button type="button" class="btn btn-cart"  onClick="handleAddCart(${item.id})">Thêm Vào Giỏ</button>
                                </div>
                            </div>
                        </li>
                    `;
                })

               
                let containerProduct = document.querySelector('#container-products');
    
                containerProduct.innerHTML = `<ul>${productHTML.join('')}</ul>`;
            }

        }


        var modal = document.getElementById("myModal");
        var btn = document.getElementById("cart");
        var close = document.getElementsByClassName("close")[0];
        var close_footer = document.getElementsByClassName("close-footer")[0];
        var order = document.getElementsByClassName("order")[0];
        btn.onclick = function () {
            modal.style.display = "block";

            let containerProductCart = document.querySelector('#container-product-cart');

            let productInCartHTML = JSON.parse(localStorage.getItem('cart')).map(item => {
                return `
                    <div class="cart-items">
                        <span class="cart-item cart-header cart-column">${item.name}</span>
                        <span class="cart-price cart-header cart-column">${item.price}</span>
                        <span class="cart-quantity cart-header cart-column">1</span>
                    </div> 
                `;
            });

            containerProductCart.innerHTML = productInCartHTML.join('');

        }
        close.onclick = function () {
            modal.style.display = "none";
        }
        close_footer.onclick = function () {
            modal.style.display = "none";
        }
        order.onclick = function () {
            alert("Cảm ơn bạn đã thanh toán đơn hàng")
        }
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }


    </script>

    {{content-for "body-footer"}}
  </body>
</html>
